<div class="height-100">
  <div class="container-fluid">

    <h4>Main Components</h4>
    <div class="main-body">

      <div class="row gutters-sm">
        <div class="col-md-3 mb-3" *ngIf="university">
          <div class="card">
            <div class="card-body">
              <div class="d-flex flex-column align-items-center text-center text-body">
                <h4 class="text-white">
                  <span class="text-info">{{ "{" }} " </span>
                  {{ university.name }}
                  <span class="text-info"> " }</span>
                </h4>
                <p class="mb-1">
                  <span class="text-info">{{ "{" }}" </span>
                  {{ university.fullName }}
                  <span class="text-info"> "}</span>
                </p>
              </div>
            </div>
          </div>
          <div class="mt-3">
            <a href="{{university.vkLink}}"
               class="btn btn-light mt-2 d-flex justify-content-between align-items-center flex-wra">
              <h5 class="mb-0">
                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                     width="30" height="30"
                     viewBox="0 0 48 48"
                     style=" fill:#000000;">
                  <path fill="#1976d2"
                        d="M42,37c0,2.762-2.238,5-5,5H11c-2.761,0-5-2.238-5-5V11c0-2.762,2.239-5,5-5h26c2.762,0,5,2.238,5,5 V37z"></path>
                  <path fill="#fff"
                        d="M35.937,18.041c0.046-0.151,0.068-0.291,0.062-0.416C35.984,17.263,35.735,17,35.149,17h-2.618 c-0.661,0-0.966,0.4-1.144,0.801c0,0-1.632,3.359-3.513,5.574c-0.61,0.641-0.92,0.625-1.25,0.625C26.447,24,26,23.786,26,23.199 v-5.185C26,17.32,25.827,17,25.268,17h-4.649C20.212,17,20,17.32,20,17.641c0,0.667,0.898,0.827,1,2.696v3.623 C21,24.84,20.847,25,20.517,25c-0.89,0-2.642-3-3.815-6.932C16.448,17.294,16.194,17,15.533,17h-2.643 C12.127,17,12,17.374,12,17.774c0,0.721,0.6,4.619,3.875,9.101C18.25,30.125,21.379,32,24.149,32c1.678,0,1.85-0.427,1.85-1.094 v-2.972C26,27.133,26.183,27,26.717,27c0.381,0,1.158,0.25,2.658,2c1.73,2.018,2.044,3,3.036,3h2.618 c0.608,0,0.957-0.255,0.971-0.75c0.003-0.126-0.015-0.267-0.056-0.424c-0.194-0.576-1.084-1.984-2.194-3.326 c-0.615-0.743-1.222-1.479-1.501-1.879C32.062,25.36,31.991,25.176,32,25c0.009-0.185,0.105-0.361,0.249-0.607 C32.223,24.393,35.607,19.642,35.937,18.041z"></path>
                </svg>
                VK
              </h5>
              <span class="text-dark">{{university.vkLink}}</span>
            </a>
          </div>
        </div>

        <div class="col-md-5">

          <button type="button" class="btn btn-primary mb-2" data-bs-toggle="modal" data-bs-target="#exampleModal">
            create review
          </button>

          <!-- Modal -->
          <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
               aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                  <button type="button" class="close pull-right" aria-label="Close" data-bs-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <div class="form-floating mb-3">
                    <input type="email" class="form-control" id="fullName"
                           [(ngModel)]="newReview.text">
                    <label for="fullName">Text</label>
                  </div>
                  <div class="form-floating mb-3">
                    <input type="email" class="form-control" id="shortName"
                           [(ngModel)]="newReview.rating">
                    <label for="shortName">Rating</label>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                  <button type="button" class="btn btn-primary" data-bs-dismiss="modal" (click)="createReview()">Save
                    changes
                  </button>
                </div>
              </div>
            </div>
          </div>


          <div *ngIf="reviews"
               class="vertical-time-simple vertical-without-time vertical-timeline vertical-timeline--animate vertical-timeline--one-column">
            <div *ngFor="let review of reviews">
              <div class="vertical-timeline-item vertical-timeline-element">
                <div>
                  <span class="vertical-timeline-element-icon bounce-in"></span>
                  <div class="vertical-timeline-element-content bounce-in">
                    <div class="card">
                      <div class="card-body">
                        <h5 class="card-title text-white">
                          <span class="text-info">{{ "{" }} " </span>
                          Ершов
                          <span class="text-info"> " : " </span>
                          Вадим
                          <span class="text-info"> " }</span>
                        </h5>
                        <p class="text-dark">
                          {{ review.text }}
                        </p>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col text-right">

                        <button pButton type="button" icon="bi bi-chat-left-dots"
                                class="p-button-rounded p-button-secondary p-button-text text-white"
                                (click)="findDiscussions(review.id)">
                        </button>
                        <!--                <button type="button" class="btn btn-light btn-lg"><i class="bi bi-chat-left-dots"></i></button>-->
<!--                        <button type="button" class="btn btn-light btn-lg" icon="bi bi-bookmark-plus">-->
<!--                        </button>-->
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>


        <div class="col-md-4">
          <div *ngIf="currentReviewId">
            <button type="button" class="btn btn-primary mb-2" data-bs-toggle="modal" data-bs-target="#modal">
              create discussion
            </button>

            <!-- Modal -->
            <div class="modal fade" id="modal" tabindex="-1" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="modalLabel">Modal title</h5>
                    <button type="button" class="close pull-right" aria-label="Close" data-bs-dismiss="modal">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <div class="form-floating mb-3">
                      <input type="email" class="form-control" id="discussion"
                             [(ngModel)]="newDiscussion.text">
                      <label for="discussion">Text</label>
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" (click)="createDiscussion()">
                      Save changes
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div *ngIf=" currentReviewId && discussions.length == 0" class="mt-1">
            Пока что никто не начал обсуждение
          </div>
          <div *ngIf="discussions.length != 0"
               class="vertical-time-simple vertical-without-time vertical-timeline vertical-timeline--animate vertical-timeline--one-column">
            <div *ngFor="let discussion of discussions">
              <div class="vertical-timeline-item vertical-timeline-element">
                <div>
                  <span class="vertical-timeline-element-icon bounce-in"></span>
                  <div class="vertical-timeline-element-content bounce-in">
                    <div class="card">
                      <div class="card-body">
                        <h5 class="card-title text-white">
                          <span class="text-info">{{ "{" }} " </span>
                          Ершов
                          <span class="text-info"> " : " </span>
                          Вадим
                          <span class="text-info"> " }</span>
                        </h5>
                        <p class="text-dark">
                          {{ discussion.text }}
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>


      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
